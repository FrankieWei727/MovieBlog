(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{425:function(e,t,a){e.exports=a(783)},783:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),l=a(18),c=a(19),s=a(21),u=a(20),m=a(22),p=a(57),d=a(90),f=a(7),h=a.n(f),g=a(15),v=a(23),x=a.n(v),y=a(810),b=a(821),E=a(794),w=a(822),k=a(826),S=a(159),j=a(82),O=a(808),C=a(831),I=a(825),T=a(36),D=function(e){return r.a.createElement("div",null,r.a.createElement(O.a,{itemLayout:"vertical",loading:e.loading,grid:{gutter:28,xs:1,sm:1,md:1,lg:1,xl:1,xxl:1},pagination:{pageSize:5,total:e.count,showQuickJumper:!0,onChange:e.handleChange},size:"large",dataSource:e.data,renderItem:function(e){return r.a.createElement(O.a.Item,{key:e.id},r.a.createElement("div",{style:{padding:"20px",background:"#fff",borderRadius:"15px",boxShadow:"0 1px 3px #777777"}},r.a.createElement(T.b,{to:"/movie/"+e.id},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{fontSize:"18px",color:"#3377aa",marginBottom:"15px",fontWeight:"600"}},e.name," (",e.release_date,")"),r.a.createElement(C.a,{border:!0,column:1},r.a.createElement(C.a.Item,{label:"Actors "},e.actors),r.a.createElement(C.a.Item,{label:"Length "},e.length),r.a.createElement(C.a.Item,{label:"Region "},e.region)),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"10px 0"}},e.category&&e.category.map((function(e){return r.a.createElement(I.a,{key:e.name,color:"#343a40",style:{color:"white",margin:"5px"}},e.name)})))),r.a.createElement("img",{alt:e.name,src:e.poster,style:{width:"135px",maxHeight:"200px",border:"2px solid #343a40",borderRadius:"8px"}}))),r.a.createElement("div",{style:{fontSize:"14px",color:"grey",paddingTop:"5px"}},e.description&&e.description.slice(0,250)+"......")))}}))},A=a(811),z=a(11),M=A.a.Panel,L=y.a.Title,_=I.a.CheckableTag,W={background:"#fff",borderRadius:4,marginBottom:24,border:0,overflow:"hidden"},H=function(e){return r.a.createElement("div",null,r.a.createElement(A.a,{bordered:!1,defaultActiveKey:["1"],expandIcon:function(e){var t=e.isActive;return r.a.createElement(z.a,{type:"caret-right",rotate:t?90:0})},style:{paddingTop:"10px"}},r.a.createElement(M,{header:r.a.createElement(L,{level:4},"Tags"),key:"1",style:W},r.a.createElement(O.a,{size:"small",dataSource:e.data,renderItem:function(t){return r.a.createElement(O.a.Item,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",alignItems:"center"}},r.a.createElement("span",{style:{backgroundColor:"#5F5E5E",borderRadius:"16px 0 16px 16px",padding:"5px 15px",color:"white",margin:"0 24px 0 0"}},t.name),t.category.map((function(t){return r.a.createElement(_,{style:{padding:"5px 10px",borderRadius:"20px"},key:"tag_id"+t.name,checked:e.selectedTags.indexOf(t)>-1,onChange:function(a){return e.handleChange(t,a)}},t.name)}))))}}))))},B=5,P=y.a.Title,U=b.a.Search,R=["All","Search Result"],Y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).page=1,a.state={movies:[],count:0,tip:R[0],search:"",tags:[],filterTag:"",loading:!0,selectedTags:[]},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getData();case 2:a.setState({loading:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r,o,i,l,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="",n=0===a.state.filterTag.length?"http://127.0.0.1:8000/api/movie/movies/?format=json&page="+a.page+"&page_size="+B+"&search="+a.state.search:"http://127.0.0.1:8000/api/movie/movies/?format=json&page="+a.page+"&page_size="+B+"&search="+a.state.search+"&category="+a.state.filterTag,e.next=5,x.a.get(n);case 5:for(r=e.sent,o=[],i=0;i<r.data.count;i++)o.push({name:"",poster:"",author:"",id:i});for(a.setState({movies:o}),l=0;l<r.data.results.length;l++)o[l]=r.data.results[l];if(a.setState({movies:o,count:r.data.count}),0!==a.state.selectedTags.length){e.next=16;break}return e.next=14,x.a.get("http://127.0.0.1:8000/api/movie/categories_group/?format=json");case 14:c=e.sent,a.setState({tags:c.data});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),a.handleMovie=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r,o,i,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,n="",n=0===a.state.filterTag.length?"http://127.0.0.1:8000/api/movie/movies/?format=json&page="+t+"&page_size="+B+"&search="+a.state.search:"http://127.0.0.1:8000/api/movie/movies/?format=json&page="+t+"&page_size="+B+"&search="+a.state.search+"?category="+a.state.filterTag,e.next=6,x.a.get(n);case 6:for(r=e.sent,o=a.state.movies,i=(t-1)*B,l=0;l<r.data.results.length;l++)o[i]=r.data.results[l],i++;a.setState({movies:o,loading:!1}),console.log(a.state.movies),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var r,o,i,l,c,s,u,m,p,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.selectedTags,o=n?[].concat(Object(d.a)(r),[t]):r.filter((function(e){return e!==t})),e.next=4,a.setState({selectedTags:o,loading:!0});case 4:for(i=[],l=!0,c=!1,s=void 0,e.prev=8,u=o[Symbol.iterator]();!(l=(m=u.next()).done);l=!0)p=m.value,i.push(p.id);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),c=!0,s=e.t0;case 16:e.prev=16,e.prev=17,l||null==u.return||u.return();case 19:if(e.prev=19,!c){e.next=22;break}throw s;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return f=i.join("?category="),e.next=27,a.setState({filterTag:f});case 27:a.getData(),a.setState({loading:!1});case 29:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])})));return function(t,a){return e.apply(this,arguments)}}(),a.search=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({loading:!0,search:t});case 2:a.getData(),n=R[1]+"  : "+t+" ",a.setState({loading:!1,tip:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{style:{minHeight:"100vh"}},r.a.createElement(w.a,null),r.a.createElement("div",{style:{flex:"1 0 ",backgroundColor:"#ffffff"}},r.a.createElement(k.a,{offsetTop:this.state.top},r.a.createElement(S.a,{style:{padding:"10px 60px",marginBottom:"20px",background:"#fff",boxShadow:"0px 2px 2px #888888"}},r.a.createElement(j.a,{xxl:{span:8,offset:1},xl:{span:13,offset:1},md:{span:13,offset:1},xs:{span:22,offset:1}},r.a.createElement(U,{placeholder:"Please enter keywords",onSearch:function(t){return e.search(t)},enterButton:!0})))),r.a.createElement(S.a,{style:{paddingTop:"0px",paddingBottom:"30px"}},r.a.createElement(j.a,{xxl:{span:10,offset:5},xl:{span:13,offset:2},md:{span:14,offset:1},xs:{span:22,offset:1},style:{paddingTop:"0px",paddingBottom:"30px"}},r.a.createElement(P,{level:4,style:{padding:"10px 20px",backgroundColor:"#767676",color:"#ffffff",marginBottom:"10px",borderRadius:"5px",fontSize:"18px"}},this.state.tip," (",this.state.count,")"),r.a.createElement(D,{key:"MovieItemList",data:this.state.movies,oading:this.state.loading,count:this.state.count,handleChange:this.handleMovie})),r.a.createElement(j.a,{xxl:{span:4,offset:0},xl:{span:7,offset:0},md:{span:7,offset:1},xs:{span:22,offset:1},style:{paddingLeft:"15px"}},r.a.createElement(H,{key:"TagsItemList",data:this.state.tags,selectedTags:this.state.selectedTags,handleChange:this.handleChange})))))}}]),t}(r.a.Component),F=a(795),N=y.a.Title,q=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement(N,{style:{color:"black",fontSize:"16px",fontWeight:"bold"}},this.props.title),r.a.createElement("div",{style:{alignItems:"centre"}},r.a.createElement(F.a,{autoplay:!0},this.props.data.map((function(e){return r.a.createElement("div",{key:"stills"+e.id},r.a.createElement("h3",null,r.a.createElement("img",{alt:e.movie,src:e.photo,style:{maxWidth:"90%",borderRadius:"5px",marginLeft:"20px",marginTop:"20px"}})))})))))}}]),t}(n.Component),V=a(796),G=a(797),J=a(809),K=a(76),Q=a(798),X=a(43),$=a.n(X),Z=b.a.TextArea,ee=function(e){var t=e.comments,a=e.username;return r.a.createElement(O.a,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(V.a,{author:e.user?e.user.username:e.username,avatar:e.user?r.a.createElement(T.b,{to:(e.user.username+""===a?"/profile/":"/visit/")+e.user.id},r.a.createElement(G.a,{src:e.user.profile.avatar})):r.a.createElement(T.b,{to:(e.id+""===window.localStorage.getItem("user_id")?"/profile/":"/visit/")+e.id},r.a.createElement(G.a,{src:(e.user,e.avatar)})),content:e.content,datetime:$()($()(e.created).format("YYYY-MM-DD HH:mm:ss"),"YYYY-MM-DD HH:mm:ss").fromNow()})}})},te=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return r.a.createElement("div",null,r.a.createElement(J.a.Item,null,r.a.createElement(Z,{rows:4,onChange:t,value:o})),r.a.createElement(J.a.Item,null,r.a.createElement(K.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"Submit")))},ae=8,ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={comments:[],submitting:!1,value:"",cache:[],loading:!1,initLoading:!0,page:1,username:"",avatarUrl:"",user:{}},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.getUserData(),!a.props.movieId){e.next=5;break}return e.next=4,a.getCommentData();case 4:a.setState((function(e){return{initLoading:!1}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.componentDidUpdate=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.movieId===a.props.movieId){e.next=4;break}return e.next=3,a.getCommentData();case 3:a.setState((function(e){return{initLoading:!1}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getUserData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=4,x.a.get("http://127.0.0.1:8000/rest-auth/user/",n);case 4:r=e.sent,a.setState((function(e){return{username:r.data.username,avatarUrl:r.data.profile.avatar,user:r.data}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a.getCommentData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.movieId){e.next=12;break}return e.prev=1,e.next=4,x.a.get("http://127.0.0.1:8000/api/comment/reviews/?format=json&page="+a.state.page+"&page_size="+ae+"&movie="+a.props.movieId);case 4:n=e.sent,a.comments=n.data.results,a.setState((function(e){return{comments:n.data.results,cache:n.data.results}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),a.sendComment=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=4,x.a.post("http://127.0.0.1:8000/api/comment/reviews/",{content:t,movie:a.props.movieId,rank:4},n);case 4:r=e.sent,console.log(r),201!==r.status&&Object(Q.a)("error"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){a.state.value&&(a.setState({submitting:!0}),a.sendComment(a.state.value),setTimeout((function(){a.setState({submitting:!1,value:"",comments:[].concat(Object(d.a)(a.state.comments),[{username:a.state.username,avatar:a.state.avatarUrl,content:r.a.createElement("p",null,a.state.value),created:$()()}])})}),500))},a.handleChange=function(e){a.setState({value:e.target.value})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.comments,a=e.username,n=e.submitting,o=e.value,i=0;return i=this.state.comments?this.state.comments.length:0,r.a.createElement("div",null,i>0&&r.a.createElement(ee,{comments:t,username:a}),null!==window.localStorage.getItem("token")?r.a.createElement("div",null,r.a.createElement(V.a,{avatar:r.a.createElement(G.a,{src:this.state.avatarUrl,alt:this.state.username}),content:r.a.createElement(te,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:n,value:o})})):r.a.createElement("div",{style:{paddingTop:"20px",paddingBottom:"40px"}},r.a.createElement("p",{style:{color:"#8E9193",fontWeight:"700"}},"Please Login to write a review...")))}}]),t}(n.Component),re=y.a.Title,oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={movie:{},prelock:!1,iFrameHeight:"0px"},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.movieID;x.a.get("http://127.0.0.1:8000/api/movie/movies/".concat(t,"/?format=json")).then((function(t){e.setState({movie:t.data})})).catch((function(e){console.log(e)})),this.setState({prelock:!0})}},{key:"render",value:function(){var e=this.state.prelock,t=this.state.movie,a=0;a=t.users_like?t.users_like.length:0;var n=0;n=t.videos?t.videos.length:0;var o=0;return o=t.stills?t.stills.length:0,r.a.createElement(E.a,{style:{minHeight:"100vh",background:"unset"}},r.a.createElement(w.a,null),r.a.createElement("div",{style:{flex:"1 0 "}},r.a.createElement(S.a,{style:{boxShadow:"0px 0px 5px #888888"}},r.a.createElement("div",{className:"MovieHeader",style:{position:"relative",overflow:"hidden",background:"hsla(0, 10%, 60%, 0.5)"}},r.a.createElement("div",{style:{background:"url(".concat(t.poster,")"),position:"absolute",filter:"blur(20px)",top:0,bottom:0,left:0,right:0,zIndex:-1,overflow:"hidden"}}),r.a.createElement(j.a,{xxl:{span:14,offset:5},xl:{span:20,offset:2},xs:{span:22,offset:1}},r.a.createElement("div",{className:"wrap",style:{background:"rgba(0,30%,100%,90%)",display:"flex",justifyContent:"space-between",padding:"20px 0"}},r.a.createElement("div",{className:"MovieCover"},r.a.createElement("img",{src:t.poster,alt:t.name,style:{width:"225px",maxHeight:"300px",border:"4px solid white",borderRadius:"8px"}})),r.a.createElement("div",{className:"content",style:{marginLeft:"20px"}},r.a.createElement(re,{level:3,style:{color:"white"}},t.name),r.a.createElement(C.a,{border:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1},style:{color:"#fff"}},r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Release Date")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.release_date)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Length")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.length)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Region")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.region)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Language")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.language)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Rank")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.rank)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Views")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.movie_views)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Likes")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},a)),r.a.createElement(C.a.Item,{label:r.a.createElement("span",{style:{color:"#fff"}},"Actors")},r.a.createElement("div",{style:{color:"#fff",fontWeight:"700"}},t.actors))),t.category&&t.category.map((function(e){return r.a.createElement(I.a,{key:e.name,color:"#fff",style:{margin:"5px"}},r.a.createElement("div",{style:{color:"#000"}},e.name))})),"# TODO: add user like",r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,r.a.createElement("div",{style:{paddingTop:"4px"}},r.a.createElement(z.a,{type:"heart",theme:"filled",style:{fontSize:"20px",color:"red"}})))))))),r.a.createElement("div",null,r.a.createElement("iframe",{title:"Movie Trailer",ref:"iframe",src:t.video,width:"100%",height:"500px",scrolling:"no",frameBorder:"0"}))),r.a.createElement(S.a,{style:{paddingTop:"30px",paddingBottom:"30px"}},r.a.createElement(j.a,{xxl:{span:10,offset:5},xl:{span:13,offset:2},md:{span:15,offset:1},xs:{span:22,offset:1}},r.a.createElement(re,{level:4},"About"),r.a.createElement("div",{style:{padding:"24px 0",whiteSpace:"pre-wrap"}},r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},t.description)),e&&0!==o&&r.a.createElement(q,{key:"StillItemList",data:t.stills,title:"Stills"}),r.a.createElement(re,{level:4},"Movie Review"),r.a.createElement(ne,{key:"AddMovieReview",movieId:t.id,movieUrl:t.url})),r.a.createElement(j.a,{xxl:{span:4,offset:0},xl:{span:7,offset:0},md:{span:7,offset:0},xs:{span:22,offset:1},style:{paddingLeft:"15px"}},e&&0!==n&&r.a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},r.a.createElement("h3",{style:{marginRight:"20px",fontWeight:"bold"}},"Play lists"),r.a.createElement("div",null,r.a.createElement(O.a,{size:"small",bordered:!1,split:!1,dataSource:t.videos,renderItem:function(e){return r.a.createElement(O.a.Item,null,r.a.createElement("a",{key:e.url,href:e.url,target:"_blank",rel:"noreferrer noopener"},e.website))}})))))))}}]),t}(r.a.Component),ie=a(75),le=function(e){return{type:"AUTH_SUCCESS",token:e}},ce=function(e,t){return{type:"AUTH_FAIL",error:e,errorMsg:t}},se=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},ue=function(e){return function(t){setTimeout((function(){t(se())}),1e3*e)}},me=a(816),pe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.LoginForm=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.props.onAuth(t.username,t.password),a.props.history.replace("/home")}catch(n){Q.a.error("The username or password is incorrect!"),console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||a.LoginForm(t)}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(E.a,{style:{minHeight:"100vh"}},r.a.createElement("div",{style:{flex:"1 0 "}},r.a.createElement(S.a,{style:{margin:"40px 40px 30px 30px"}},r.a.createElement(j.a,{xxl:{span:10,offset:7},xl:{span:12,offset:6},xs:{span:22,offset:1},style:{background:"white",padding:"40px 50px",boxShadow:"0px 2px 2px #888888"}},r.a.createElement("h1",null,"Welcome"),r.a.createElement(J.a,{onSubmit:this.handleSubmit,className:"login-form",style:{maxWidth:"300px"}},r.a.createElement(J.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(z.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(J.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(z.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(J.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(me.a,null,"Remember me")),r.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password"),r.a.createElement(K.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"Log in"),"No account? ",r.a.createElement("a",{href:""},"register now!")))))))}}]),t}(r.a.Component),de=Object(ie.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{onAuth:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START",errorMsg:null,error:null}),x.a.post("http://127.0.0.1:8000/rest-auth/login/",{username:e,password:t}).then((function(e){var t=e.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",n),a(le(t)),a(ue(3600))})).catch((function(e){a(ce(e))}))}}(t,a))}}}))(J.a.create()(pe)),fe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,{to:"/login"}))}}]),t}(r.a.Component),he=a(214),ge=a(827),ve=a(828),xe=a(817),ye=a(807),be=a(799),Ee=a(786),we=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password1:"",password2:""},a.handleChange=function(e){a.setState(Object(he.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.email,o=t.password1,i=t.password2;a.props.signup(n,r,o,i)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password1,o=e.password2,i=this.props,l=i.error,c=i.token,s=i.errorMsg;return c?r.a.createElement(p.a,{to:"/home"}):r.a.createElement("div",null,r.a.createElement(ge.a,{style:{height:"200vh"}},r.a.createElement(ge.a.Column,{style:{maxWidth:600}},r.a.createElement("div",{style:{paddingLeft:"10em",paddingTop:"10em"}},r.a.createElement(ve.a,{as:"h2",color:"teal"},"Create a new account"),l&&r.a.createElement("div",null,r.a.createElement(xe.a,{color:"red"},r.a.createElement(xe.a.Header,null,"Error"),r.a.createElement(xe.a.List,null,s.password1&&this.props.errorMsg.password1.map((function(e){return r.a.createElement(xe.a.Item,{key:"password1Msg"+e.id},e)})),s.username&&this.props.errorMsg.username.map((function(e){return r.a.createElement(xe.a.Item,{key:"usernameMsg"+e.id},e)})),s.non_field_errors&&this.props.errorMsg.non_field_errors.map((function(e){return r.a.createElement(xe.a.Item,{key:"non_field_errorsMsg"+e.id},e)}))))),r.a.createElement(ye.a,{style:{paddingTop:"3em",paddingBottom:"1em"},onSubmit:this.handleSubmit},r.a.createElement(ye.a.Field,{required:!0},r.a.createElement("label",null,"Username"),r.a.createElement(be.a,{placeholder:"username",name:"username",value:t,required:!0,onChange:this.handleChange})),r.a.createElement(ye.a.Field,{required:!0},r.a.createElement("label",null,"Email"),r.a.createElement(be.a,{placeholder:"email",name:"email",value:a,type:"email",onChange:this.handleChange})),r.a.createElement(ye.a.Field,{required:!0},r.a.createElement("label",null,"Password"),r.a.createElement(be.a,{placeholder:"password",name:"password1",value:n,type:"password",required:!0,onChange:this.handleChange})),r.a.createElement(ye.a.Field,{required:!0},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(be.a,{placeholder:"confirm password",name:"password2",value:o,type:"password",required:!0,onChange:this.handleChange})),r.a.createElement(Ee.a,{color:"teal",fluid:!0,size:"large",style:{maxWidth:200}},"Sign Up"))))))}}]),t}(r.a.Component),ke=Object(ie.b)((function(e){return{token:e.auth.token,loading:e.auth.loading,error:e.auth.error,errorMsg:e.auth.errorMsg}}),(function(e){return{signup:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"AUTH_START",errorMsg:null,error:null}),x.a.post("http://127.0.0.1:8000/rest-auth/registration/",{username:e,email:t,password1:a,password2:n}).then((function(e){var t=e.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",a),r(le(t)),r(ue(3600))})).catch((function(e){console.log(e.response.data),r(ce(e,e.response.data))}))}}(t,a,n,r))}}}))(we),Se=a(829),je=a(414),Oe=a(801),Ce=a(802),Ie=a(832),Te=a(800),De=a(823),Ae=function(){return"undefined"===typeof window?Ie.a.onlyTablet.minWidth:window.innerWidth},ze=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n}),a.props.history.push("/".concat(n))},a.hideFixedMenu=function(){return a.setState({fixed:!1})},a.showFixedMenu=function(){return a.setState({fixed:!0})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.children,t=this.state.fixed,a=this.state.activeItem;return r.a.createElement(Ie.a,{getWidth:Ae,minWidth:Ie.a.onlyTablet.minWidth},r.a.createElement(Te.a,{once:!1,onBottomPassed:this.showFixedMenu,onBottomPassedReverse:this.hideFixedMenu},r.a.createElement(Se.a,{inverted:!0,textAlign:"center",style:{minHeight:100,padding:"1em 0em"},vertical:!0},r.a.createElement(De.a,{fixed:t?"top":null,inverted:!t,pointing:!t,secondary:!t,size:"large"},r.a.createElement(Oe.a,null,r.a.createElement(De.a.Item,{name:"home",active:"home"===a,onClick:this.handleItemClick},"Home"),r.a.createElement(De.a.Item,{name:"movie",active:"movie"===a,onClick:this.handleItemClick},"Movie"),r.a.createElement(De.a.Item,{name:"article",active:"article"===a,onClick:this.handleItemClick},"Blog"),r.a.createElement(De.a.Item,{name:"event",active:"event"===a,onClick:this.handleItemClick},"Event"),this.props.isAuthenticated?r.a.createElement(De.a.Item,{name:"profile",active:"profile"===a,onClick:this.handleItemClick},"Profile"):r.a.createElement("div",null),r.a.createElement(De.a.Item,{position:"right"},this.props.isAuthenticated?r.a.createElement(Ee.a,{inverted:!t,onClick:this.props.logout},r.a.createElement(T.b,{to:"/logout"},"Log out")):r.a.createElement("div",null,r.a.createElement(Ee.a,{inverted:!t},r.a.createElement(T.b,{to:"/login"},"Log in")),r.a.createElement(Ee.a,{inverted:!t,style:{marginLeft:"0.5em"}},r.a.createElement(T.b,{to:"/signup"},"Sign Up")))))))),e)}}]),t}(n.Component),Me=Object(p.f)(Object(ie.b)(null,(function(e){return{logout:function(){return e(se())}}}))(ze)),Le=a(818),_e=a(103),We=function(e){var t=e.mobile;return r.a.createElement(Oe.a,{text:!0},r.a.createElement(ve.a,{as:"h1",content:"Movie Community",inverted:!0,style:{fontSize:t?"2em":"3em",fontWeight:"normal",marginBottom:0,marginTop:t?"1em":"2em"}}),r.a.createElement(ve.a,{as:"h2",content:"Do whatever you want when you want to.",inverted:!0,style:{fontSize:t?"1.5em":"2em",fontWeight:"normal",marginTop:"1em"}}))},He=function(){return"undefined"===typeof window?Ie.a.onlyTablet.minWidth:window.innerWidth},Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n}),a.props.history.push("/".concat(n))},a.handleSidebarHide=function(){return a.setState({sidebarOpened:!1})},a.handleToggle=function(){return a.setState({sidebarOpened:!0})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.children,t=this.state.sidebarOpened,a=this.state.activeItem;return r.a.createElement(Ie.a,{as:Le.a.Pushable,getWidth:He,maxWidth:Ie.a.onlyMobile.maxWidth},r.a.createElement(Le.a,{as:De.a,animation:"push",inverted:!0,onHide:this.handleSidebarHide,vertical:!0,visible:t},r.a.createElement(De.a.Item,{name:"home",active:"home"===a,onClick:this.handleItemClick},"Home"),r.a.createElement(De.a.Item,{name:"movie",active:"movie"===a,onClick:this.handleItemClick},"Movie"),r.a.createElement(De.a.Item,{name:"article",active:"article"===a,onClick:this.handleItemClick},"Blog"),r.a.createElement(De.a.Item,{name:"event",active:"event"===a,onClick:this.handleItemClick},"Event"),this.props.isAuthenticated?r.a.createElement(De.a.Item,{onClick:this.props.logout},"Log Out"):r.a.createElement("div",null,r.a.createElement(De.a.Item,{name:"login",active:"login"===a,onClick:this.handleItemClick},"Log in"),r.a.createElement(De.a.Item,{name:"signup",active:"signup"===a,onClick:this.handleItemClick},"Sign Up"))),r.a.createElement(Le.a.Pusher,{dimmed:t},r.a.createElement(Se.a,{inverted:!0,textAlign:"center",style:{minHeight:350,padding:"1em 0em"},vertical:!0},r.a.createElement(Oe.a,null,r.a.createElement(De.a,{inverted:!0,pointing:!0,secondary:!0,size:"large"},r.a.createElement(De.a.Item,{onClick:this.handleToggle},r.a.createElement(_e.a,{name:"sidebar"})))),r.a.createElement(We,{mobile:!0})),e))}}]),t}(n.Component),Pe=Object(p.f)(Object(ie.b)(null,(function(e){return{logout:function(){return e(se())}}}))(Be)),Ue=function(){return r.a.createElement("div",null,r.a.createElement(Se.a,{style:{padding:"8em 0em"},vertical:!0},r.a.createElement(ge.a,{container:!0,stackable:!0,verticalAlign:"middle"},r.a.createElement(ge.a.Row,null,r.a.createElement(ge.a.Column,{width:8},r.a.createElement(ve.a,{as:"h3",style:{fontSize:"2em"}},"We Help Companies and Companions"),r.a.createElement("p",{style:{fontSize:"1.33em"}},"We can give your company superpowers to do things that they never thought possible. Let us delight your customers and empower your needs... through pure data analytics."),r.a.createElement(ve.a,{as:"h3",style:{fontSize:"2em"}},"We Make Bananas That Can Dance"),r.a.createElement("p",{style:{fontSize:"1.33em"}},"Yes that's right, you thought it was the stuff of dreams, but even bananas can be bioengineered.")),r.a.createElement(ge.a.Column,{floated:"right",width:6},r.a.createElement(je.a,{bordered:!0,rounded:!0,size:"large",src:"/images/wireframe/white-image.png"}))),r.a.createElement(ge.a.Row,null,r.a.createElement(ge.a.Column,{textAlign:"center"},r.a.createElement(Ee.a,{size:"huge"},"Check Them Out"))))),r.a.createElement(Se.a,{style:{padding:"0em"},vertical:!0},r.a.createElement(ge.a,{celled:"internally",columns:"equal",stackable:!0},r.a.createElement(ge.a.Row,{textAlign:"center"},r.a.createElement(ge.a.Column,{style:{paddingBottom:"5em",paddingTop:"5em"}},r.a.createElement(ve.a,{as:"h3",style:{fontSize:"2em"}},'"What a Company"'),r.a.createElement("p",{style:{fontSize:"1.33em"}},"That is what they all say about us")),r.a.createElement(ge.a.Column,{style:{paddingBottom:"5em",paddingTop:"5em"}},r.a.createElement(ve.a,{as:"h3",style:{fontSize:"2em"}},'"I shouldn\'t have gone with their competitor."'),r.a.createElement("p",{style:{fontSize:"1.33em"}},r.a.createElement(je.a,{avatar:!0,src:"/images/avatar/large/nan.jpg"}),r.a.createElement("b",null,"Nan")," Chief Fun Officer Acme Toys"))))),r.a.createElement(Se.a,{style:{padding:"8em 0em"},vertical:!0},r.a.createElement(Oe.a,{text:!0},r.a.createElement(ve.a,{as:"h3",style:{fontSize:"2em"}},"Breaking The Grid, Grabs Your Attention"),r.a.createElement("p",{style:{fontSize:"1.33em"}},"Instead of focusing on content creation and hard work, we have learned how to master the art of doing nothing by providing massive amounts of whitespace and generic content that can seem massive, monolithic and worth your attention."),r.a.createElement(Ee.a,{as:"a",size:"large"},"Read More"),r.a.createElement(Ce.a,{as:"h4",className:"header",horizontal:!0,style:{margin:"3em 0em",textTransform:"uppercase"}},r.a.createElement("a",{href:"/home"},"Case Studies")),r.a.createElement(ve.a,{as:"h3",style:{fontSize:"2em"}},"Did We Tell You About Our Bananas?"),r.a.createElement("p",{style:{fontSize:"1.33em"}},"Yes I know you probably disregarded the earlier boasts as non-sequitur filler content, but it's really true. It took years of gene splicing and combinatory DNA research, but our bananas can really dance."),r.a.createElement(Ee.a,{as:"a",size:"large"},"I'm Still Quite Interested"))))},Re=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ue,null))}}]),t}(n.Component),Ye=a(812),Fe=function(e){return r.a.createElement(Ye.a,{style:{paddingBottom:"10px"}},r.a.createElement(Ye.a.Image,{src:e.event.poster}),r.a.createElement(Ye.a.Content,null,r.a.createElement(Ye.a.Header,{as:"a",href:"/event/".concat(e.event.id)},e.event.title),r.a.createElement(Ye.a.Meta,null,r.a.createElement("span",{className:"cinema"},e.event.location)),r.a.createElement(Ye.a.Description,null,e.event.body.substr(0,400),"..."),r.a.createElement(Ye.a.Extra,null,r.a.createElement(Ee.a,{primary:!0,floated:"right",href:"/event/".concat(e.event.id)},"More Detail",r.a.createElement(_e.a,{name:"right chevron"})))))},Ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={events:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.a.get("http://127.0.0.1:8000/api/movie/activities/").then((function(t){e.setState({events:t.data})}))}},{key:"render",value:function(){return r.a.createElement(Ye.a.Group,{divided:!0,style:{padding:"30px",paddingBottom:"20em"}},this.state.events.map((function(e){return r.a.createElement(Fe,{event:e,key:e.id})})))}}]),t}(r.a.Component),qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={event:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.eventID;x.a.get("http://127.0.0.1:8000/api/movie/activities/".concat(t)).then((function(t){e.setState({event:t.data}),console.log(t.data)}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{paddingTop:"10em",paddingBottom:"20em"}},r.a.createElement(Oe.a,{text:!0},r.a.createElement(ve.a,{as:"h2"},this.state.event.title),r.a.createElement("div",{style:{paddingBottom:"1em"}},r.a.createElement(_e.a,{name:"location arrow"})," ",this.state.event.location),r.a.createElement("div",{style:{paddingBottom:"1em"}},r.a.createElement(_e.a,{name:"calendar times"})," ",this.state.event.start_date," to ",this.state.event.end_date),r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},this.state.event.body)),r.a.createElement(ge.a,{centered:!0,columns:2,style:{paddingTop:"5em"}},r.a.createElement(ge.a.Column,null,r.a.createElement(je.a,{src:this.state.event.poster,size:"large",alt:""}))))}}]),t}(r.a.Component),Ve=a(289),Ge=a(824),Je=a(803),Ke=function(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"360px"}},r.a.createElement("div",{style:{backgroundImage:"url(".concat(e.user.profile.cover,")"),backgroundSize:"cover",height:"100px"}}),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(G.a,{icon:"user",shape:"square",size:72,src:e.user.profile.avatar,style:{marginTop:"-24px",marginLeft:"30px",border:"3px solid white"}}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:"12px",marginTop:"2px"}},r.a.createElement("div",{style:{fontWeight:"bolder",fontSize:"18px"}},e.user.username),r.a.createElement("div",null,e.user.profile.bio&&e.user.profile.bio.slice(0,14)+"..."))),r.a.createElement("div",{style:{padding:"20px 30px"}},e.user.profile.profession&&r.a.createElement(I.a,{color:"#f50",style:{height:"26px",fontSize:"16px"}},e.user.profile.profession)))},Qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={follow:!1,loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Je.a,{content:r.a.createElement(Ke,this.props),trigger:"hover",placement:"topLeft"},r.a.createElement("div",null,r.a.createElement(T.b,{to:((this.props.user&&this.props.user.id)+""===window.localStorage.getItem("user_id")?"/profile/":"/visit/")+(this.props.user&&this.props.user.id)},r.a.createElement(G.a,{shape:"square",icon:"user",src:this.props.user&&this.props.user.profile.avatar}))))}}]),t}(n.Component),Xe=6,$e=200,Ze=z.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1242637_vfurgm6ec3b.js"}),et=b.a.Search,tt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).page=1,a.state={data:[],cache:[],loading:!1,initLoading:!0,next:"",username:""},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getArticleData();case 2:return e.next=4,a.getUserData();case 4:a.setState({initLoading:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.extractText=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText},a.extractBrief=function(e){var t=a.extractText(e);return t.length>$e?t.slice(0,$e)+"\u2026\u2026":t},a.getUserData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/rest-auth/user/",{headers:{Authorization:"Token "+window.localStorage.getItem("token")}});case 3:n=e.sent,a.setState((function(e){return{username:n.data.username}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.getArticleData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/api/comment/articles/?format=json&page="+a.page+"&page_size="+Xe);case 3:n=e.sent,a.setState({data:n.data.results,cache:n.data.results,next:n.data.next}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.onLoadMore=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({loading:!0,cache:a.state.data.concat(Object(d.a)(new Array(Xe)).map((function(){return{loading:!0,name:{}}})))});case 2:return e.prev=2,a.page=a.page+1,e.next=6,x.a.get("http://127.0.0.1:8000/api/comment/articles/?format=json&page="+a.page+"&page_size="+Xe);case 6:n=e.sent,a.setState({next:n.data.next}),r=a.state.data,200===n.status?(o=a.state.data.concat(n.data.results),a.setState({data:o,cache:o,loading:!1},(function(){window.dispatchEvent(new window.Event("resize"))}))):a.setState({cache:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),a.search=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({initLoading:!0}),e.prev=1,e.next=4,x.a.get("http://127.0.0.1:8000/api/comment/articles/?format=json&page="+a.page+"&page_size="+Xe+"&search="+t);case 4:n=e.sent,a.setState({data:n.data.results,cache:n.data.results,initLoading:!1,next:n.data.next}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.initLoading,n=t.loading,o=t.cache,i=t.data,l=t.next,c=a||n||!l?null:r.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},i.length>0&&r.a.createElement(K.a,{onClick:this.onLoadMore},r.a.createElement(Ze,{type:"icon-more1-copy-copy"}),"Load More"));return r.a.createElement("div",{style:{backgroundColor:"#fff",boxShadow:"0 1px 3px rgba(26,26,26,.1)",borderRadius:"1px"}},r.a.createElement(et,{placeholder:"Please input keywords",onSearch:function(t){return e.search(t)},enterButton:!0}),r.a.createElement(O.a,{itemLayout:"vertical",dataSource:o,loadMore:c,loading:a,renderItem:function(t){return r.a.createElement(O.a.Item,{actions:[r.a.createElement(K.a,{style:{color:"#76839b",backgroundColor:"transparent",display:"inline-block",fontSize:"14px",fontWeight:"500"},type:"link"}," ",r.a.createElement(Ze,{type:"icon-eye-fill",style:{paddingLeft:"5px",color:"#76839b"}})," ","Views ",t.views)]},r.a.createElement("div",{style:"Y"===t.originality?{borderLeft:"8px solid",borderColor:"#269f42",paddingLeft:"15px"}:{}},r.a.createElement(Ge.a,{avatar:!0,title:!1,loading:t.loading,active:!0},r.a.createElement(O.a.Item.Meta,{title:r.a.createElement(T.b,{to:(t.author&&t.author.username)+""===e.state.username?"/profile/":"/visit/"+(t.author&&t.author.id)},r.a.createElement("div",null,t.author&&t.author.username,"\u5ba1\u6838\u901a\u8fc7"===(t.author&&t.author.profile.media_editor_auth)?r.a.createElement(Ze,{type:"icon-renzhenghuizhang",style:{paddingLeft:"10px"}}):null)),avatar:r.a.createElement(Qe,{kwy:"avatarFlow",user:t.author}),description:t.created&&$()($()(t.created).format("YYYY-MM-DD HH:mm:ss"),"YYYY-MM-DD HH:mm:ss").fromNow()}),r.a.createElement(T.b,{to:"/article/"+t.id},r.a.createElement("h3",{style:{color:"#1a1a1a",fontWeight:"600",fontSize:"18px",fontStretch:"100%"}},t.title),r.a.createElement("div",{style:{color:"#646464",fontSize:"15px"}},e.extractBrief(t.content))))))}}))}}]),t}(n.Component),at=z.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1242637_ng8zkbwomt.js"}),nt=y.a.Title,rt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={current:"",switch:!1},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getUserProfile();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleClick=function(e){a.setState({current:e.key})},a.getUserProfile=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://127.0.0.1:8000/rest-auth/user/",{headers:{Authorization:"Token "+window.localStorage.getItem("token")}}).then((function(e){a.setState({switch:"\u5ba1\u6838\u901a\u8fc7"===e.data.profile.media_editor_auth})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"20px 20px",background:"#fff",borderRadius:"1px",boxShadow:"0 1px 3px rgba(26,26,26,.1)",marginBottom:"10px"}},r.a.createElement(nt,{level:4,style:{marginBottom:"30px"}},"Promotion"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(T.b,{to:null!==window.localStorage.getItem("token")?"/create_article":"/login"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement(at,{type:"icon-article",style:{fontSize:"36px"}}),r.a.createElement("div",null,"Write Article"))),r.a.createElement(T.b,{to:this.state.switch?"/book_editor_page":"/settings/account"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement(at,{type:"icon-book",style:{fontSize:"36px"}}),r.a.createElement("div",null,"\u63a8\u4e66\u7c4d"))),r.a.createElement(T.b,{to:this.state.switch?"/movie_editor_page":"/settings/account"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement(at,{type:"icon-movie",style:{fontSize:"36px"}}),r.a.createElement("div",null,"\u63a8\u5f71\u89c6")))))}}]),t}(n.Component),ot=Ve.a.TabPane,it=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!1},a.onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a.goToEditorPage=function(){a.props.history.replace("/textEditorPage")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{style:{minHeight:"100vh",backgroundColor:"#f7f7f7"}},r.a.createElement(w.a,null),r.a.createElement(S.a,{style:{flex:"1 0",padding:"15px 0"}},r.a.createElement(j.a,{xxl:{span:10,offset:5},xl:{span:13,offset:2},md:{span:15,offset:1},xs:{span:24,offset:0},style:{marginBottom:"20px",backgroundColor:"#fff",padding:"20px 20px",boxShadow:"0 1px 3px rgba(26,26,26,.1)",borderRadius:"1px"}},r.a.createElement(Ve.a,{defaultActiveKey:"1"},r.a.createElement(ot,{tab:"All",key:"1"},r.a.createElement(tt,null)),r.a.createElement(ot,{tab:"\u5173\u6ce8",key:"2"}))),r.a.createElement(j.a,{xxl:{span:4,offset:0},xl:{span:7,offset:0},md:{span:7,offset:0},xs:{span:22,offset:1},style:{paddingLeft:"15px"}},r.a.createElement(rt,null))))}}]),t}(n.Component),lt=Object(p.f)(J.a.create()(it)),ct=a(804),st=a(805),ut=a(158),mt=a.n(ut),pt=(a(380),function(e){ct.a[e]({message:"Succeed",description:"Published successfully",duration:2})}),dt=function(e){ct.a[e]({message:"Error",description:"Publishing failed",duration:2})},ft=["letter-spacing","line-height","clear","headings","list-ol","list-ul","remove-styles","superscript","subscript","hr","text-align"],ht=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={uploading:!1},a.handleSubmit=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=Object(g.a)(h.a.mark((function e(t,n){var r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return a.setState({uploading:!0}),r={title:n.title,content:n.content.toHTML(),originalitySwitch:n.originalitySwitch,statusSwitch:n.statusSwitch},e.prev=3,e.next=6,x.a.post("http://127.0.0.1:8000/api/comment/articles/",{title:r.title,content:r.content,status:!0===r.statusSwitch?"1":"2"},{headers:{Authorization:"Token "+window.localStorage.getItem("token")}});case 6:o=e.sent,a.setState({uploading:!1}),201===o.status&&(pt("success"),a.props.history.replace("/article")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0.response.data),dt("error");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.props.form.setFieldsValue({content:mt.a.createEditorState(null)})}),1e3)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(E.a,{style:{minHeight:"100vh"}},r.a.createElement(S.a,{style:{backgroundColor:"#fff",paddingTop:"30px"}},r.a.createElement(j.a,{xxl:{span:12,offset:6},xl:{span:16,offset:4},xs:{span:22,offset:1}},r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement(J.a,{onSubmit:this.handleSubmit,className:"text-editor-form"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between"}},r.a.createElement(J.a.Item,null,r.a.createElement(K.a,{loading:this.state.uploading,type:"primary",htmlType:"submit"},"Submit")),r.a.createElement(J.a.Item,null,e("originalitySwitch",{rules:[]})(r.a.createElement(st.a,{checkedChildren:"Original",unCheckedChildren:"Reprinted"}))),r.a.createElement(J.a.Item,null,e("statusSwitch",{rules:[]})(r.a.createElement(st.a,{checkedChildren:"Draft",unCheckedChildren:"Publish"})))),r.a.createElement(J.a.Item,null,e("title",{rules:[{required:!0,message:"Please input title."}]})(r.a.createElement(b.a,{size:"large",placeholder:"Title"}))),r.a.createElement(J.a.Item,null,e("content",{validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,a){t.isEmpty()||a()}}]})(r.a.createElement(mt.a,{className:"my-editor",excludeControls:ft,placeholder:"Content",language:"en",media:{image:!0}}))))))))}}]),t}(n.Component),gt=Object(p.f)(J.a.create()(ht)),vt=a(819),xt=a(386),yt=(a(779),a(830)),bt=yt.a.Meta,Et=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],urlAvatar:"",username:"",bio:"",id:"",profession:""},a.getProfileData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/api/account/users/"+a.props.authorId+"?format=json");case 3:n=e.sent,a.data=n.data.results,a.setState({urlAvatar:n.data.profile.avatar,username:n.data.username,bio:n.data.profile.bio,id:n.data.id,profession:n.data.profile.profession}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.authorId!==this.props.authorId&&this.getProfileData()}},{key:"render",value:function(){return r.a.createElement(yt.a,{title:r.a.createElement("div",{style:{fontWeight:"bold"}},"About author"),bordered:!0,style:{background:"#fff",fontWeight:"bold",borderRadius:"1px",boxShadow:"0 1px 3px rgba(26,26,26,.1)"}},r.a.createElement(bt,{avatar:r.a.createElement(T.b,{to:(this.state.id+""===window.localStorage.getItem("user_id")?"/profile/":"/visit/")+this.state.id},r.a.createElement(G.a,{shape:"square",src:this.state.urlAvatar})),title:r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("span",{style:{fontWeight:"bold",color:"#000",marginRight:"6px"}},this.state.username),this.state.profession&&r.a.createElement(I.a,{color:"#f50"},this.state.profession))),description:this.state.bio}))}}]),t}(n.Component),wt=b.a.TextArea,kt=function(e){var t=e.comments;return r.a.createElement(O.a,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(V.a,{author:e.author?e.author.username:e.username,avatar:r.a.createElement(Qe,{user:e.author}),content:e.content,datetime:$()($()(e.created).format("YYYY-MM-DD HH:mm:ss"),"YYYY-MM-DD HH:mm:ss").fromNow()})}})},St=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return r.a.createElement("div",null,r.a.createElement(J.a.Item,null,r.a.createElement(wt,{rows:4,onChange:t,value:o})),r.a.createElement(J.a.Item,null,r.a.createElement(K.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"Submit")))},jt=8,Ot=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={comments:[],submitting:!1,value:"",cache:[],loading:!1,initLoading:!0,page:1,username:"",avatar:""},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.getUserData(),!a.props.articleId){e.next=5;break}return e.next=4,a.getCommentData();case 4:a.setState((function(e){return{initLoading:!1}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.componentDidUpdate=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.articleId===a.props.articleId){e.next=4;break}return e.next=3,a.getCommentData();case 3:a.setState((function(e){return{initLoading:!1}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getUserData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/rest-auth/user/",{headers:{Authorization:"Token "+window.localStorage.getItem("token")}});case 3:n=e.sent,a.setState((function(e){return{username:n.data.username,avatar:n.data.profile.avatar}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.getCommentData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.articleId){e.next=12;break}return e.prev=1,e.next=4,x.a.get("http://127.0.0.1:8000/api/comment/article_comments/?format=json&page="+a.state.page+"&page_size="+jt+"&article="+a.props.articleId);case 4:n=e.sent,a.comments=n.data.results,a.setState((function(e){return{comments:n.data.results,cache:n.data.results}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),a.sendComment=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("http://127.0.0.1:8000/api/comment/article_comments/",{content:t,article:a.props.articleUrl},{headers:{Authorization:"Token "+window.localStorage.getItem("token")}});case 3:201!==e.sent.status&&Object(Q.a)("error"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){a.state.value&&(a.setState({submitting:!0}),a.sendComment(a.state.value),setTimeout((function(){a.setState({submitting:!1,value:"",comments:[].concat(Object(d.a)(a.state.comments),[{username:a.state.username,avatar:a.state.avatar,content:r.a.createElement("p",null,a.state.value),pub_date:$()()}])})}),500))},a.handleChange=function(e){a.setState({value:e.target.value})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.comments,a=e.submitting,n=e.value;return r.a.createElement("div",null,t.length>0&&r.a.createElement(kt,{comments:t}),null!==window.localStorage.getItem("token")?r.a.createElement("div",null,r.a.createElement(V.a,{avatar:r.a.createElement(G.a,{shape:"square",src:this.state.avatar,alt:this.state.username}),content:r.a.createElement(St,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:a,value:n})})):r.a.createElement("div",{style:{paddingTop:"20px",paddingBottom:"40px"}},r.a.createElement("p",{style:{color:"#8E9193",fontWeight:"700"}},"Please Login to write a comment...")))}}]),t}(n.Component),Ct=y.a.Paragraph,It=y.a.Title,Tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getArticle();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getArticle=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/api/comment/articles/"+a.props.match.params.articleID);case 3:n=e.sent,a.setState((function(e){return{title:n.data.title,content:n.data.content,id:n.data.id,url:n.data.url,loading:!1,authorId:n.data.author.id,created:n.data.created,views:n.data.views}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.state={title:"loading...",content:"",id:"",url:"",translationList:[],visible:!1,modalTitle:"",modalContent:"",loading:!0,authorId:"",pubDate:"",views:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{style:{minHeight:"100vh",backgroundColor:"#fff"}},r.a.createElement(w.a,null),r.a.createElement(S.a,{style:{background:"#fff",padding:"20px 0",marginBottom:"15px",boxShadow:"0px 2px 2px #888888"}},r.a.createElement(j.a,{xxl:{span:10,offset:5},xl:{span:13,offset:2},md:{span:14,offset:1},xs:{span:22,offset:1}},r.a.createElement("div",{style:{fontSize:"22px",fontWeight:"bold",color:"black"}},r.a.createElement(Ct,{ellipsis:{rows:1,expandable:!0},strong:!0,style:{color:"black"}},this.state.title))),r.a.createElement(j.a,{xxl:{span:4,offset:0},xl:{span:6,offset:1},md:{span:7,offset:1},xs:{span:22,offset:1},style:{paddingLeft:"15px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"}},r.a.createElement(vt.a,{title:"View",suffix:"times",value:this.state.views}),r.a.createElement(vt.a,{title:"Published date",value:$()($()(this.state.created).format("YYYY-MM-DD HH:mm:ss"),"YYYY-MM-DD HH:mm:ss").fromNow()})))),r.a.createElement(S.a,{style:{flex:"1 0"}},r.a.createElement(j.a,{xxl:{span:10,offset:5},xl:{span:14,offset:2},md:{span:15,offset:1},xs:{span:22,offset:1}},r.a.createElement("div",{type:"flex",style:{flex:"1 0",background:"#fff",padding:"10px 0",marginBottom:"20px"}},r.a.createElement("div",{style:{fontSize:"16px"}},r.a.createElement("div",{className:"braft-output-content",style:{overflow:"auto"},dangerouslySetInnerHTML:{__html:this.state.content}})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(xt.a,{spinning:this.state.loading,size:"large",tip:"loading..."})),r.a.createElement(It,{level:4,style:{paddingTop:"50px"}},"Comment"),r.a.createElement(Ot,{articleId:this.state.id,articleUrl:this.state.url}))),r.a.createElement(j.a,{xxl:{span:4,offset:0},xl:{span:6,offset:0},md:{span:7,offset:0},xs:{span:22,offset:1},style:{paddingBottom:"20px",paddingLeft:"15px"}},r.a.createElement(k.a,{offsetTop:0},r.a.createElement(Et,{authorId:this.state.authorId})))))}}]),t}(n.Component),Dt=J.a.create()(Tt),At=a(806),zt=a(813),Mt=a(815),Lt=a(820),_t=3,Wt=zt.a.confirm,Ht=200,Bt=z.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1242637_estflglakgj.js"}),Pt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],cache:[],loading:!1,initLoading:!0,page:1,next:"",status:1,number:0},a.onClick=function(){var e=Object(g.a)(h.a.mark((function e(t,n,r){var o,i,l,c,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("2"!==n){e.next=14;break}return e.prev=1,o="http://127.0.0.1:8000/api/comment/my_articles/"+t,i={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=6,x.a.patch(o,{status:"1"},i);case 6:l=a.state.cache,a.my(l,t,"1"),a.setState({cache:l}),Q.a.success(r+" is putting in draft box successfully"),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:if("1"!==n){e.next=28;break}return e.prev=15,c="http://127.0.0.1:8000/api/comment/my_articles/"+t,s={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=20,x.a.patch(c,{status:"2"},s);case 20:u=a.state.cache,a.my(u,t,"2"),a.setState({cache:u}),Q.a.success(r+" is published successfully"),e.next=28;break;case 26:e.prev=26,e.t1=e.catch(15);case 28:case"end":return e.stop()}}),e,null,[[1,12],[15,26]])})));return function(t,a,n){return e.apply(this,arguments)}}(),a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getArticleData();case 2:a.setState((function(e){return{initLoading:!1}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.extractText=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText},a.extractBrief=function(e){var t=a.extractText(e);return t.length>Ht?t.slice(0,Ht)+"\u2026\u2026":t},a.getArticleData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=4,x.a.get("http://127.0.0.1:8000/api/comment/my_articles/?format=json&page="+a.state.page+"&page_size="+_t,n);case 4:r=e.sent,a.setState((function(e){return{data:r.data.results,cache:r.data.results,next:r.data.next,number:r.data.count}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a.onLoadMore=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({loading:!0,cache:a.state.data.concat(Object(d.a)(new Array(_t)).map((function(){return{loading:!0,name:{}}})))});case 2:return e.prev=2,a.state.page=a.state.page+1,n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=7,x.a.get("http://127.0.0.1:8000/api/comment/my_articles/?format=json&page="+a.state.page+"&page_size="+_t,n);case 7:r=e.sent,a.setState({next:r.data.next}),o=a.state.data,200===r.status?(i=a.state.data.concat(r.data.results),a.setState({data:i,cache:i,loading:!1},(function(){window.dispatchEvent(new window.Event("resize"))}))):a.setState({cache:o}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteArticle=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Wt({title:"Delete!",content:"Are you sure you want to delete this article\uff1f",onOk:function(){var e=Object(g.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=3,x.a.delete("http://127.0.0.1:8000/api/comment/my_articles/"+t,n);case 3:204===e.sent.status?(Q.a.success("Delete successfully."),a.setState((function(e){return{cache:e.cache.filter((function(e){return e.id!==t}))}}))):Q.a.error("Delete unsuccessfully.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"my",value:function(e,t,a){for(var n=0;n<e.length;n++)e[n].id===t&&(e[n].status=a);return e}},{key:"render",value:function(){var e=this,t=this.state,a=t.initLoading,n=t.loading,o=t.cache,i=t.next,l=a||n||!i?null:r.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},this.state.cache.length>0&&r.a.createElement(K.a,{onClick:this.onLoadMore},"Load More"));return r.a.createElement("div",{className:"queue-demo"},r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"start",marginBottom:"10px"}},r.a.createElement("div",{style:{marginRight:"20px",fontWeight:"bold"}},r.a.createElement(I.a,{color:"#108ee9"},"Articles"),this.state.number)),r.a.createElement(O.a,{itemLayout:"vertical",dataSource:o,size:"small",loadMore:l,loading:a,style:{paddingBottom:"20px"},renderItem:function(t){return r.a.createElement(O.a.Item,{actions:[r.a.createElement(T.b,{to:"/article/revise/"+t.id},r.a.createElement(K.a,{style:{color:"#76839b",backgroundColor:"transparent",display:"inline-block",fontSize:"14px",fontWeight:"500"},type:"link"}," ",r.a.createElement(Bt,{type:"icon-edit",style:{paddingLeft:"5px",color:"#76839b"}})," ","Edit"," ")),r.a.createElement(K.a,{style:{color:"#76839b",backgroundColor:"transparent",display:"inline-block",fontSize:"14px",fontWeight:"500"},type:"link",onClick:function(){return e.deleteArticle(t.id)}},r.a.createElement(Bt,{type:"icon-delete-fill",style:{paddingLeft:"5px",color:"#76839b"}})," ","Delete"," "),r.a.createElement(Mt.a,{overlay:r.a.createElement(Lt.a,{onClick:e.onClick.bind(e,t.id,t.status,t.title)},r.a.createElement(Lt.a.Item,{key:"1",disabled:"2"===t.status,style:{fontWeight:"600",display:"flex",justifyContent:"center"}},"Publish"),r.a.createElement(Lt.a.Item,{key:"2",disabled:"1"===t.status,style:{fontWeight:"600",display:"flex",justifyContent:"center"}},"Draft")),trigger:["click"],placement:"bottomCenter"},r.a.createElement(K.a,{style:{color:"#76839b",backgroundColor:"transparent",display:"inline-block",fontSize:"14px",fontWeight:"500"},type:"link"},r.a.createElement(Bt,{type:"2"===t.status?"icon-fabu1":"icon-caogao",style:{paddingLeft:"5px",color:"#76839b"}})," ","2"===t.status?"Published":"Draft"," "))]},r.a.createElement(Ge.a,{avatar:!0,title:!1,loading:t.loading,active:!0},r.a.createElement(O.a.Item.Meta,{title:r.a.createElement("div",null,t.author&&t.author.username,"\u5ba1\u6838\u901a\u8fc7"===(t.author&&t.author.profile.media_editor_auth)?r.a.createElement(Bt,{type:"icon-renzhenghuizhang",style:{paddingLeft:"10px"}}):null),avatar:r.a.createElement(G.a,{shape:"square",icon:"user",src:t.author&&t.author.profile.avatar}),description:t.created&&$()($()(t.created).format("YYYY-MM-DD HH:mm:ss"),"YYYY-MM-DD HH:mm:ss").fromNow()}),r.a.createElement(T.b,{to:"/article/"+t.id},r.a.createElement("h3",{style:{color:"#1a1a1a",fontWeight:"600",fontSize:"18px",fontStretch:"100%"}},t.title),r.a.createElement("div",{style:{color:"#646464",fontSize:"15px"}},e.extractBrief(t.content)))))}})))}}]),t}(n.Component),Ut=Ve.a.TabPane,Rt=y.a.Paragraph;function Yt(e){var t=e.size/1024/1024<2;return t||Q.a.error("File size must smaller than 2MB!"),t&&function(e,t,a){return new Promise((function(n,r){var o=new window.FileReader;o.onload=function(e){var o=e.target.result,i=new window.Image;i.onload=function(){t&&this.width<t?(Q.a.error("The uploaded image must be larger than 1200p x 240p"),r()):a&&this.height<a?(Q.a.error("The uploaded image must be larger than 1200p x 240p"),r()):n()},i.onerror=r,i.src=o},o.readAsDataURL(e)}))}(e,1200,240)}var Ft=z.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1242637_bctqp8owe4o.js"}),Nt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],urlAvatar:"",username:"",bio:"",property:0,profession:"",loading:!1,cover:""},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getProfileData();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getProfileData=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://127.0.0.1:8000/rest-auth/user/?format=json",{headers:{Authorization:"Token "+window.localStorage.getItem("token")}}).then((function(e){a.setState({urlAvatar:e.data.profile.avatar,username:e.data.username,bio:e.data.profile.bio,property:e.data.profile.property,profession:e.data.profile.profession,cover:e.data.profile.cover})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.CoverAvatarUrl=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.patch("http://127.0.0.1:8000/rest-auth/user/",{profile:{cover:t}},{headers:{Authorization:"Token "+window.localStorage.getItem("token")}}).then((function(e){200===e.status&&Q.a.success("Update successfully")})).catch((function(e){console.log(e.response.data)}));case 2:a.setState({cover:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){"uploading"!==e.file.status?("done"===e.file.status&&a.setState({imageUrl:e.file.response.data.link,loading:!1}),a.CoverAvatarUrl(e.file.response.data.link)):a.setState({loading:!0})},a.customRequest=function(){var e=Object(g.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new window.FormData).append("image",t.file),e.next=5,x.a.post(t.action,a,{headers:{"content-type":"multipart/form-data",Authorization:"Client-ID d0b3bf7724440e7"}});case 5:n=e.sent,t.onSuccess(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{style:{minHeight:"100vh",backgroundColor:"#f7f7f7"}},r.a.createElement(S.a,{style:{marginTop:"15px"}},r.a.createElement(j.a,{xxl:{span:14,offset:5},xl:{span:20,offset:2},md:{span:22,offset:1},xs:{span:24,offset:0},style:{boxShadow:"0 1px 3px rgba(26,26,26,.1)"}},r.a.createElement("div",{style:{backgroundImage:"url(".concat(this.state.cover,")"),backgroundColor:"#fff",overflow:"hidden",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundOrigin:"padding-box",backgroundClip:"border-box",backgroundAttachment:"scroll",height:"240px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",marginTop:"20px",marginRight:"20px"}},r.a.createElement(At.a,{name:"avatar",showUploadList:!1,beforeUpload:Yt,onChange:this.handleChange,customRequest:this.customRequest,action:"https://api.imgur.com/3/image"},r.a.createElement(K.a,{ghost:!0,style:{width:"150px",color:"#fff"}},r.a.createElement(z.a,{type:"upload"}),"Edit")))),r.a.createElement("div",{style:{background:"#fff",display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},r.a.createElement("div",{style:{height:"200px",width:"200px",marginTop:"-100px",padding:"20px"}},r.a.createElement(G.a,{shape:"square",src:this.state.urlAvatar,icon:"user",style:{height:"100%",width:"100%",border:"4px solid white",borderRadius:"10px",backgroundColor:"white"}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",flexWrap:"wrap"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("span",{style:{fontSize:"26px",lineHeight:"30px",fontWeight:"bold",color:"#000",marginRight:"6px"}},this.state.username),this.state.profession&&r.a.createElement(I.a,{color:"#f50",style:{height:"22px",fontSize:"14px"}},this.state.profession)),r.a.createElement(Rt,null,this.state.bio)),r.a.createElement("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row-reverse",alignItems:"center",padding:"20px"}},r.a.createElement(K.a,{type:"primary",ghost:!0,style:{width:"150px"}},r.a.createElement(T.b,{to:"/profile/setting/"},"Setting")))))),r.a.createElement(S.a,{style:{flex:"1 0",paddingTop:"15px",paddingBottom:"30px"}},r.a.createElement(j.a,{xxl:{span:10,offset:5},xl:{span:14,offset:2},md:{span:14,offset:1},xs:{span:24,offset:0},style:{background:"#fff",padding:"0 20px",marginBottom:"30px",boxShadow:"0 1px 3px rgba(26,26,26,.1)"}},r.a.createElement(Ve.a,{defaultActiveKey:"1",size:"large"},r.a.createElement(Ut,{tab:r.a.createElement("span",null,r.a.createElement(Ft,{type:"icon-wenzhang"}),"My Articles"),key:"1"},r.a.createElement(Pt,null)),r.a.createElement(Ut,{tab:r.a.createElement("span",null,r.a.createElement(Ft,{type:"icon-meishi1"}),"\u6211\u7684\u5173\u6ce8"),key:"2"}),r.a.createElement(Ut,{tab:r.a.createElement("span",null,r.a.createElement(Ft,{type:"icon-meishi1"}),"\u5173\u6ce8\u6211\u7684"),key:"3"}))),r.a.createElement(j.a,{xxl:{span:4,offset:0},xl:{span:6,offset:0},md:{span:8,offset:0},xs:{span:22,offset:1},style:{paddingLeft:"20px"}},r.a.createElement(yt.a,{title:r.a.createElement("div",{style:{color:"#646464",fontWeight:"600",fontSize:"15px"}},"\u79ef\u5206"),bordered:!1,style:{boxShadow:"0 1px 3px rgba(26,26,26,.1)",marginBottom:"20px"}}),r.a.createElement(yt.a,{title:r.a.createElement("div",{style:{color:"#646464",fontWeight:"600",fontSize:"15px"}},"\u6210\u5c31"),bordered:!1,style:{boxShadow:"0 1px 3px rgba(26,26,26,.1)"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},r.a.createElement(vt.a,{title:"\u5173\u6ce8\u4e86",value:0}),r.a.createElement(vt.a,{title:"\u5173\u6ce8\u8005",value:0}))))),r.a.createElement(S.a,null,r.a.createElement(j.a,{xxl:{span:16,offset:4},xl:{span:20,offset:2},xs:{span:22,offset:1}})))}}]),t}(n.Component),qt=a(173);function Vt(e){var t=e.size/1024/1024<2;return t||Q.a.error("File size must smaller than 2MB!"),t}n.Component;var Gt=qt.a.Option,Jt=["\u9ad8\u65b0\u79d1\u6280","\u4e92\u8054\u7f51","\u7535\u5b50\u5546\u52a1","    \u7535\u5b50\u6e38\u620f","    \u8ba1\u7b97\u673a\u8f6f\u4ef6","    \u8ba1\u7b97\u673a\u786c\u4ef6","\u4fe1\u606f\u4f20\u5a92","    \u51fa\u7248\u4e1a","    \u7535\u5f71\u5f55\u97f3","    \u5e7f\u64ad\u7535\u89c6","    \u901a\u4fe1","\u91d1\u878d","    \u94f6\u884c","    \u8d44\u672c\u6295\u8d44","    \u8bc1\u5238\u6295\u8d44","    \u4fdd\u9669","    \u4fe1\u8d37","    \u8d22\u52a1","    \u5ba1\u8ba1","\u670d\u52a1\u4e1a","    \u6cd5\u5f8b","    \u9910\u996e","    \u9152\u5e97","    \u65c5\u6e38","    \u5e7f\u544a","    \u516c\u5173","    \u666f\u89c2","    \u54a8\u8be2\u5206\u6790","    \u5e02\u573a\u63a8\u5e7f","    \u4eba\u529b\u8d44\u6e90","    \u793e\u5de5\u670d\u52a1","    \u517b\u8001\u670d\u52a1","\u6559\u80b2","    \u9ad8\u7b49\u6559\u80b2","    \u57fa\u7840\u6559\u80b2","    \u804c\u4e1a\u6559\u80b2","    \u5e7c\u513f\u6559\u80b2","    \u7279\u6b8a\u6559\u80b2","    \u57f9\u8bad","\u533b\u7597\u670d\u52a1","    \u4e34\u5e8a\u533b\u7597","    \u5236\u836f","    \u4fdd\u5065","    \u7f8e\u5bb9","    \u533b\u7597\u5668\u6750","    \u751f\u7269\u5de5\u7a0b","    \u7597\u517b\u670d\u52a1","    \u62a4\u7406\u670d\u52a1","\u827a\u672f\u5a31\u4e50","    \u521b\u610f\u827a\u672f","    \u4f53\u80b2\u5065\u8eab","    \u5a31\u4e50\u4f11\u95f2","    \u56fe\u4e66\u9986","    \u535a\u7269\u9986","    \u7b56\u5c55","    \u535a\u5f69","\u5236\u9020\u52a0\u5de5","    \u98df\u54c1\u996e\u6599\u4e1a","    \u7eba\u7ec7\u76ae\u9769\u4e1a","    \u670d\u88c5\u4e1a","    \u70df\u8349\u4e1a","    \u9020\u7eb8\u4e1a","    \u5370\u5237\u4e1a","    \u5316\u5de5\u4e1a","    \u6c7d\u8f66","    \u5bb6\u5177","    \u7535\u5b50\u7535\u5668","    \u673a\u68b0\u8bbe\u5907","    \u5851\u6599\u5de5\u4e1a","    \u91d1\u5c5e\u52a0\u5de5","    \u519b\u706b","\u5730\u4ea7\u5efa\u7b51","    \u623f\u5730\u4ea7","    \u88c5\u9970\u88c5\u6f62","    \u7269\u4e1a\u670d\u52a1","    \u7279\u6b8a\u5efa\u9020","    \u5efa\u7b51\u8bbe\u5907","\u8d38\u6613\u96f6\u552e","    \u96f6\u552e","    \u5927\u5b97\u4ea4\u6613","    \u8fdb\u51fa\u53e3\u8d38\u6613","\u516c\u5171\u670d\u52a1","    \u653f\u5e9c","    \u56fd\u9632\u519b\u4e8b","    \u822a\u5929","    \u79d1\u7814","    \u7ed9\u6392\u6c34","    \u6c34\u5229\u80fd\u6e90","    \u7535\u529b\u7535\u7f51","    \u516c\u5171\u7ba1\u7406","    \u73af\u5883\u4fdd\u62a4","    \u975e\u8425\u5229\u7ec4\u7ec7","\u5f00\u91c7\u51b6\u91d1","    \u7164\u70ad\u5de5\u4e1a","    \u77f3\u6cb9\u5de5\u4e1a","    \u9ed1\u8272\u91d1\u5c5e","    \u6709\u8272\u91d1\u5c5e","    \u571f\u7802\u77f3\u5f00\u91c7","    \u5730\u70ed\u5f00\u91c7","\u4ea4\u901a\u4ed3\u50a8","    \u90ae\u653f","    \u7269\u6d41\u9012\u9001","    \u5730\u9762\u8fd0\u8f93","    \u94c1\u8def\u8fd0\u8f93","    \u7ba1\u7ebf\u8fd0\u8f93","    \u822a\u8fd0\u4e1a","    \u6c11\u7528\u822a\u7a7a\u4e1a","\u519c\u6797\u7267\u6e14","    \u79cd\u690d\u4e1a","    \u755c\u7267\u517b\u6b96\u4e1a","    \u6797\u4e1a","    \u6e14\u4e1a"];function Kt(e){var t=e.size/1024/1024<2;return t||Q.a.error("File size must smaller than 2MB!"),t}var Qt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],collapsed:!1,bio:"",username:"",email:"",uploading:!1,profession:"",urlAvatar:""},a.onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a.getProfileData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=4,x.a.get("http://127.0.0.1:8000/rest-auth/user/",n);case 4:r=e.sent,a.data=r.data.results,a.setState((function(e){return{id:r.data.id,urlAvatar:r.data.profile.avatar,bio:r.data.profile.bio,username:r.data.username,email:r.data.email,profession:r.data.profile.profession}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},a.customRequest=function(){var e=Object(g.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new window.FormData).append("image",t.file),e.next=5,x.a.post(t.action,a,{headers:{"content-type":"multipart/form-data",Authorization:"Client-ID d0b3bf7724440e7"}});case 5:n=e.sent,t.onSuccess(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=Object(g.a)(h.a.mark((function e(t,n){var r,o,i,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.avatar?n.avatar[0].response.data.link:a.state.urlAvatar,t){e.next=18;break}return a.setState({uploading:!0}),o={username:n.username,bio:n.bio,email:n.email,profession:n.profession,avatar:r},e.prev=4,i={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=8,x.a.patch("http://127.0.0.1:8000/rest-auth/user/",{username:o.username,profile:{bio:o.bio,profession:o.profession,avatar:o.avatar},email:o.email},i);case 8:l=e.sent,a.setState({uploading:!1}),200===l.status&&(Q.a.success("Update successfully"),a.props.history.replace("/profile")),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),Q.a.error("Update unsuccessfully"),console.log(e.t0.response.data),a.setState({uploading:!1});case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getProfileData()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(E.a,{style:{minHeight:"100vh",backgroundColor:"#fff"}},r.a.createElement("div",{style:{flex:"1 0"}},r.a.createElement(S.a,{style:{flex:"1 0",paddingTop:"20px"}},r.a.createElement(j.a,{xxl:{span:3,offset:5},xl:{span:4,offset:2},md:{span:5,offset:1},xs:{span:22,offset:1},style:{marginBottom:"20px"}},r.a.createElement("nav",{style:{border:"1px solid #d1d5da",borderRadius:"3px"}},r.a.createElement("div",{style:{backgroundColor:"#f3f5f8",color:"#586069",padding:"8px 16px",fontSize:"14px",lineHeight:"20px",borderBottom:"1px solid #e1e4e8",fontWeight:"800"}},"Setting"),r.a.createElement(T.b,{to:"/settings/profile"},r.a.createElement("div",{style:{padding:"8px 10px",display:"block",borderBottom:"1px solid #e1e4e8",color:"#24292e",fontWeight:"600",cursor:"default",borderLeft:"3px solid #e36209"}},r.a.createElement(z.a,{type:"user",style:{paddingRight:"6px"}}),"\u4e2a\u4eba\u4fe1\u606f")),r.a.createElement(T.b,{to:"/settings/account"},r.a.createElement("div",{style:{padding:"8px 10px",display:"block",color:"#0366d6"}},r.a.createElement(z.a,{type:"user",style:{paddingRight:"6px"}}),"\u8d26\u53f7\u8bbe\u7f6e")))),r.a.createElement(j.a,{xxl:{span:11,offset:0},xl:{span:16,offset:0},md:{span:16,offset:0},xs:{span:22,offset:1},style:{paddingLeft:"15px"}},r.a.createElement("div",{style:{padding:"0 10px "}},r.a.createElement(S.a,null,r.a.createElement(j.a,{xl:{span:24,offset:0},xs:{span:22,offset:1}},r.a.createElement("div",{style:{fontSize:"20px",borderBottom:"1px solid #e1e4e8",paddingBottom:"8px",fontWeight:"600",color:"#24292e"}},"Personal Info"))),r.a.createElement(S.a,{style:{marginTop:"20px"}},r.a.createElement(j.a,{xl:{span:16,offset:0},xs:{span:22,offset:1},style:{paddingBottom:"20px"}},r.a.createElement(J.a,{onSubmit:this.handleSubmit},r.a.createElement("div",{style:{fontSize:"14px",fontWeight:"600",lineHeight:"21px",marginBottom:"3px",color:"#24292e"}},"Username"),r.a.createElement(J.a.Item,null,e("username",{initialValue:this.state.username,rules:[{required:!0,message:"Please input username."}]})(r.a.createElement(b.a,{size:"default"}))),r.a.createElement("div",{style:{fontSize:"14px",fontWeight:"600",lineHeight:"21px",marginBottom:"3px",color:"#24292e"}},"Introduction"),r.a.createElement(J.a.Item,null,e("bio",{initialValue:this.state.bio,rules:[{required:!0,message:"Please input bio."}]})(r.a.createElement(b.a,{size:"default"}))),r.a.createElement("div",{style:{fontSize:"14px",fontWeight:"600",lineHeight:"21px",marginBottom:"3px",color:"#24292e"}},"Email"),r.a.createElement(J.a.Item,null,e("email",{initialValue:this.state.email,rules:[{required:!0,message:"Please input email."}]})(r.a.createElement(b.a,{size:"default"}))),r.a.createElement("div",{style:{fontSize:"14px",fontWeight:"600",lineHeight:"21px",marginBottom:"3px",color:"#24292e"}},"Industry"),r.a.createElement(J.a.Item,{hasFeedback:!0},e("profession",{initialValue:this.state.profession,rules:[{required:!0,message:"Please select your peofession!"}]})(r.a.createElement(qt.a,{placeholder:"Please select a profession"},Jt.map((function(e){return r.a.createElement(Gt,{key:"options",value:e},e)}))))),r.a.createElement(J.a.Item,{label:"Upload Avatar"},e("avatar",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(At.a,{name:"avatar",action:"https://api.imgur.com/3/image",listType:"picture",customRequest:this.customRequest,beforeUpload:Kt},r.a.createElement(K.a,null,r.a.createElement(z.a,{type:"upload"})," Click to upload")))),r.a.createElement(J.a.Item,null,r.a.createElement(K.a,{loading:this.state.uploading,type:"primary",htmlType:"submit",style:{backgroundColor:"#2fcb53",color:"white",borderColor:"#2fcb53",fontWeight:"400"}},"Update")))),r.a.createElement(j.a,{xl:{span:6,offset:2},xs:{span:22,offset:1}},r.a.createElement(G.a,{size:180,shape:"square",src:this.state.urlAvatar,icon:"user",style:{color:"#ffffff",backgroundColor:"#f6f6f6"}}))))))))}}]),t}(n.Component),Xt=Object(p.f)(J.a.create()(Qt)),$t=function(e){ct.a[e]({message:"Succeed",description:"Save successfully!",duration:2})},Zt=function(e){ct.a[e]({message:"Error",description:"Save unsuccessfully!",duration:2})},ea=["letter-spacing","line-height","clear","headings","list-ol","list-ul","remove-styles","superscript","subscript","hr","text-align"],ta=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={uploading:!1,title:"",content:""},a.componentDidMount=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getData();case 2:a.props.form.setFieldsValue({content:mt.a.createEditorState(a.state.content)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getData=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Token "+window.localStorage.getItem("token")}},e.next=4,x.a.get("http://127.0.0.1:8000/api/comment/my_articles/"+a.props.match.params.articleID,n);case 4:r=e.sent,a.setState({title:r.data.title,content:r.data.content,originality:"Y"===r.data.originality}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=Object(g.a)(h.a.mark((function e(t,n){var r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=14;break}return a.setState({uploading:!0}),r={title:n.title,content:n.content.toHTML(),originalitySwitch:n.originalitySwitch},e.prev=3,e.next=6,x.a.patch("http://127.0.0.1:8000/api/comment/my_articles/"+a.props.match.params.articleID,{title:r.title,content:r.content,originality:!0===r.originalitySwitch?"Y":"N"},{headers:{Authorization:"Token "+window.localStorage.getItem("token")}});case 6:o=e.sent,a.setState({uploading:!1}),200===o.status&&($t("success"),a.props.history.replace("/profile")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Zt("error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(E.a,{style:{minHeight:"100vh"}},r.a.createElement(S.a,{style:{backgroundColor:"#fff",paddingTop:"30px"}},r.a.createElement(j.a,{xxl:{span:12,offset:6},xl:{span:16,offset:4},xs:{span:22,offset:1}},r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement(J.a,{onSubmit:this.handleSubmit,className:"text-editor-form"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between"}},r.a.createElement(J.a.Item,null,r.a.createElement(K.a,{loading:this.state.uploading,type:"primary",htmlType:"submit"},"Save")),r.a.createElement(J.a.Item,null,e("originalitySwitch",{initialValue:this.state.originality,rules:[]})(r.a.createElement(st.a,{checkedChildren:"\u539f\u521b",unCheckedChildren:"\u8f6c\u8f7d\u6574\u7406"})))),r.a.createElement(J.a.Item,null,e("title",{initialValue:this.state.title,rules:[{required:!0,message:"Please input title here."}]})(r.a.createElement(b.a,{size:"large"}))),r.a.createElement(J.a.Item,null,e("content",{validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,a){t.isEmpty()||a()}}]})(r.a.createElement(mt.a,{className:"my-editor",excludeControls:ea,placeholder:"Please write down your ideas!",media:{image:!0},language:"en"}))))))))}}]),t}(n.Component),aa=Object(p.f)(J.a.create()(ta)),na=function(){return r.a.createElement("div",null,r.a.createElement(p.b,{exact:!0,path:"/home/",component:Re}),r.a.createElement(p.b,{exact:!0,path:"/movie/",component:Y}),r.a.createElement(p.b,{exact:!0,path:"/movie/:movieID/",component:oe}),r.a.createElement(p.b,{exact:!0,path:"/event/",component:Ne}),r.a.createElement(p.b,{exact:!0,path:"/event/:eventID/",component:qe}),r.a.createElement(p.b,{exact:!0,path:"/login/",component:de}),r.a.createElement(p.b,{exact:!0,path:"/logout/",component:fe}),r.a.createElement(p.b,{exact:!0,path:"/signup/",component:ke}),r.a.createElement(p.b,{exact:!0,path:"/profile/",component:Nt}),r.a.createElement(p.b,{exact:!0,path:"/profile/setting/",component:Xt}),r.a.createElement(p.b,{exact:!0,path:"/article",component:lt}),r.a.createElement(p.b,{exact:!0,path:"/create_article",component:gt}),r.a.createElement(p.b,{exact:!0,path:"/article/:articleID/",component:Dt}),r.a.createElement(p.b,{exact:!0,path:"/article/revise/:articleID/",component:aa}))},ra=a(814),oa=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Se.a,{inverted:!0,vertical:!0,style:{padding:"5em 0em"}},r.a.createElement(Oe.a,null,r.a.createElement(ge.a,{divided:!0,inverted:!0,stackable:!0},r.a.createElement(ge.a.Row,null,r.a.createElement(ge.a.Column,{width:3},r.a.createElement(ve.a,{inverted:!0,as:"h4",content:"About"}),r.a.createElement(ra.a,{link:!0,inverted:!0},r.a.createElement(ra.a.Item,{as:"a"},"Sitemap"),r.a.createElement(ra.a.Item,{as:"a"},"Contact Us"),r.a.createElement(ra.a.Item,{as:"a"},"Religious Ceremonies"),r.a.createElement(ra.a.Item,{as:"a"},"Gazebo Plans"))),r.a.createElement(ge.a.Column,{width:3},r.a.createElement(ve.a,{inverted:!0,as:"h4",content:"Services"}),r.a.createElement(ra.a,{link:!0,inverted:!0},r.a.createElement(ra.a.Item,{as:"a"},"Banana Pre-Order"),r.a.createElement(ra.a.Item,{as:"a"},"DNA FAQ"),r.a.createElement(ra.a.Item,{as:"a"},"How To Access"),r.a.createElement(ra.a.Item,{as:"a"},"Favorite X-Men"))),r.a.createElement(ge.a.Column,{width:7},r.a.createElement(ve.a,{as:"h4",inverted:!0},"Footer Header"),r.a.createElement("p",null,"Extra space for a call to action inside the footer that could help re-engage users."))))))}}]),t}(r.a.Component),ia=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(Me,this.props),r.a.createElement(Pe,this.props),r.a.createElement(na,null),r.a.createElement(oa,null)))}}]),t}(r.a.Component),la=Object(ie.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(void 0===t)e(se());else{var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(se()):(e(le(t)),e(ue((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))(ia);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(781),a(782);function ca(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var sa=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ca(a,!0).forEach((function(t){Object(he.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ca(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{},t)},ua={token:null,error:null,loading:!1},ma=function(e,t){return sa(e,{error:null,loading:!0})},pa=function(e,t){return sa(e,{token:t.token,error:null,loading:!1})},da=function(e,t){return sa(e,{error:t.error,errorMsg:t.errorMsg,loading:!1})},fa=function(e,t){return sa(e,{token:null})},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return ma(e);case"AUTH_SUCCESS":return pa(e,t);case"AUTH_LOGOUT":return fa(e);case"AUTH_FAIL":return da(e,t);default:return e}},ga=a(132),va=a(413),xa=Object(ga.c)({auth:ha}),ya=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ga.d,ba=Object(ga.e)(xa,ya(Object(ga.a)(va.a))),Ea=r.a.createElement(ie.a,{store:ba},r.a.createElement(la,null));i.a.render(Ea,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[425,1,2]]]);
//# sourceMappingURL=main.78b078a1.chunk.js.map